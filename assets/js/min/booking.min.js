/* LFInteractive LLC. All Rights Reserved */
(()=>{function e(){let e=$("#cabin-image"),t=n.isNightly?Array.from(r.nightly):Array.from(r.seasonal);$("#cabin-names")[0].innerHTML="";let i=0;t.forEach(t=>{let l=document.createElement("p");l.id=t.name.replaceAll(" ","-").toLowerCase(),l.innerText=`${t.name} - ${a.format(t.price)}/night`,$("#cabin-names")[0].appendChild(l),$(l).attr("index",i),$(l).on("click",()=>{let a=`/assets/images/cabins/${t.image}.jpg`;Array.from($("#cabin-names p[selected]")).forEach(e=>{$(e).attr("selected",null)}),$(l).attr("selected",""),e.css("background-image",`url('${a}')`),function(e){let t;t=n.isNightly?r.nightly[e]:r.seasonal[e];n.cabin.name=t.name,n.cabin.price=t.price}($(l).attr("index"))}),0==i&&l.click(),i++}),$("#cabin-names p")[0].click()}function t(){if($(`#${i.next}`).css("display",""),i.element.scrollBy(i.element.offsetWidth,0),i.previous=i.current,i.current=i.next,i.next=$(`#${i.current}`).attr("next"),null==i.next?$("#next").attr("disabled",""):$("#next").attr("disabled",null),null==i.previous?$("#previous").attr("disabled",""):$("#previous").attr("disabled",null),"contact-information"==i.current){let e=setInterval(()=>{(function(){let e=!1;1!=$("#email[interacted]").length||/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test($("#email[interacted]").val())?$("#email[interacted]").removeClass("error"):$("#email[interacted]").addClass("error");1==$("#fname[interacted]").length&&0==$("#fname[interacted]").val().length?$("#fname[interacted]").addClass("error"):$("#fname[interacted]").removeClass("error");1==$("#lname[interacted]").length&&0==$("#lname[interacted]").val().length?$("#lname[interacted]").addClass("error"):$("#lname[interacted]").removeClass("error");1==$("#telephone-number[interacted]").length&&10!=$("#telephone-number[interacted]").val().replaceAll("(","").replaceAll(")","").replaceAll("-","").replaceAll(" ","").length?$("#telephone-number[interacted]").addClass("error"):$("#telephone-number[interacted]").removeClass("error");return Array.from($("#contact-information input[interacted]")).forEach(t=>{(0==t.value.length||t.classList.contains("error"))&&(e=!0)}),console.log(!e),!e})()&&null!=e&&(clearInterval(e),e=null)},1e3)}"itemized"==i.current&&function(){let e=0,t=n.cabin.price*n.nights,r=15*n.people.adults*n.nights,i=10*n.people.children*n.nights,l=10*n.people.pets*n.nights;e+=r,n.people.children>0&&(e+=i),n.people.pets>0&&(e+=l),e+=t,e=a.format(e),$("#itemized-cabin-name")[0].innerText=n.cabin.name,$("#itemized-nights")[0].innerText=`${n.nights} Nights`,$("#itemized-cabin-price")[0].innerText=a.format(t),$("#itemized-cabin-price-per")[0].innerText=a.format(n.cabin.price),$("#itemized-adults-count")[0].innerText=n.people.adults,$("#itemized-adults-price")[0].innerText=a.format(r),$("#itemized-adults-price-per")[0].innerText=a.format(15),$("#itemized-children-count")[0].innerText=n.people.children,$("#itemized-children-price")[0].innerText=a.format(i),$("#itemized-children-price-per")[0].innerText=a.format(10),$("#itemized-pets-count")[0].innerText=n.people.pets,$("#itemized-pets-price")[0].innerText=a.format(l),$("#itemized-pets-price-per")[0].innerText=a.format(10),$("#total-balance")[0].innerHTML=e}(),setTimeout(()=>{i.element.querySelectorAll("section").forEach(e=>{e.id!=i.current&&$(e).css("display","none")})},500),window.scrollTo(0,$("#sections")[0].offsetTop)}let n={isNightly:"nightly",cabin:{name:"",price:0},people:{adults:0,children:0,pets:0},nights:7,price:0},r={nightly:[{name:"Quaker Brook",image:"cabin-a",price:40},{name:"Deer Brook",image:"cabin-b",price:40},{name:"Suncook (10+ People)",image:"cabin-c",price:60},{name:"Rip Stream",image:"cabin-d",price:50},{name:"Red Brook",image:"cabin-e",price:50}],seasonal:[{name:"Premium Lot with electricity and water",image:"cabin-a",price:3e3},{name:"Primitive Lot",image:"cabin-b",price:1900}]},a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),i={element:$("#sections")[0],current:"time-span",next:"cabin",previous:null};$("#time-span .card").on("click",r=>{n.isNightly="Nightly"==r.currentTarget.querySelector(".name").innerText,e(),t(),$("#section-navigation").css("opacity","")}),$("#next").on("click",e=>{null==$(e.currentTarget).attr("disabled")&&t()}),$("#previous").on("click",e=>{null==$(e.currentTarget).attr("disabled")&&($(`#${i.previous}`).css("display",""),i.current=i.previous,i.previous=$(`#${i.current}`).attr("previous"),i.next=$(`#${i.current}`).attr("next"),null==i.next?$("#next").attr("disabled",""):$("#next").attr("disabled",null),null==i.previous?$("#previous").attr("disabled",""):$("#previous").attr("disabled",null),setTimeout(()=>{i.element.querySelectorAll("section").forEach(e=>{e.id!=i.current&&$(e).css("display","none")})},500),window.scrollTo(0,$("#sections")[0].offsetTop))}),$("input[type=tel]").on("keydown",e=>{let t=e.key;"Enter"!=t&&"Backspace"!=t&&(isNaN(t)||isNaN(parseInt(t)))&&e.preventDefault()}),$("input[type=tel]").on("change",e=>{let t=e.currentTarget,n=$(t).val().replace(/\D/g,"");if(""!=n){let e=n.substring(0,3),r=n.substring(3,6),a=n.substring(6,10);$(t).val(`(${e}) ${r}-${a}`)}}),$("#contact-information input").on("focus",e=>$(e.target).attr("interacted","")),$("#print-itemized").on("click",()=>function(){let e=window.open("","PRINT","width=1280,height=720,top=100,left=150");e.document.write(`<html>\n        <head>\n        </head>\n        <body>\n        ${$("#itemized").html()}\n        </body>\n        </html>`),e.document.close(),e.focus(),e.print(),e.close()}()),e(),$(".count").on("click",e=>{let t=e.target,n=t.parentElement;Array.from(n.querySelectorAll(".count")).forEach(e=>{$(e).attr("selected",null)}),$(t).attr("selected",""),$(n).attr("value",t.innerText)}),$("#pets .count").on("click",e=>{n.people.pets=Number.parseInt($(e.target.parentElement).attr("value"))}),$("#adults .count").on("click",e=>{n.people.adults=Number.parseInt($(e.target.parentElement).attr("value"))}),$("#children .count").on("click",e=>{n.people.children=Number.parseInt($(e.target.parentElement).attr("value"))}),$("#pets .count")[0].click(),$("#adults .count")[1].click(),$("#children .count")[3].click(),function(){let e=new Date;e.setDate(e.getDate()+5);let t=("0"+e.getDate()).slice(-2),r=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear()+"-"+r+"-"+t;$("#start-date")[0].value=a,$("input[type=date]").attr("min",a),$("input[type=month]").attr("min",`${e.getFullYear()}-${r}`),$("input[type=month]").attr("value",`${e.getFullYear()}-${r}`),$("input[type=month]").attr("placeholder",`${r}/${e.getFullYear().toString().substring(2,4)}`),e.setDate(e.getDate()+7),t=("0"+e.getDate()).slice(-2),r=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear()+"-"+r+"-"+t,$("#end-date")[0].value=a,$("#start-date, #end-date").on("change",()=>{let e=$("input#end-date")[0].valueAsDate,t=$("input#start-date")[0].valueAsDate,r=Math.round((e-t)/864e5);n.nights=r}),$("#start-date").on("change",e=>{let t=e.target.value;$("#end-date")[0].min=t}),$("#end-date").on("change",e=>{let t=e.target.value;$("#start-date")[0].max=t})}()}).call();