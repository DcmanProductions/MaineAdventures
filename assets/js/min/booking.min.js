/* LFInteractive LLC. All Rights Reserved */
(()=>{function e(){let e=$("#cabin-image"),n=a.isNightly?Array.from(r.nightly):Array.from(r.seasonal);$("#cabin-names")[0].innerHTML="";let l=0;n.forEach(n=>{let s=document.createElement("p");s.id=n.name.replaceAll(" ","-").toLowerCase(),s.innerText=`${n.name} - ${i.format(n.price)}/night`,$("#cabin-names")[0].appendChild(s),$(s).attr("index",l),$(s).on("click",()=>{let i=`/assets/images/cabins/${n.image}.jpg`;Array.from($("#cabin-names p[selected]")).forEach(e=>{$(e).attr("selected",null)}),$(s).attr("selected",""),e.css("background-image",`url('${i}')`),function(e){let n;n=a.isNightly?r.nightly[e]:r.seasonal[e];a.cabin.name=n.name,a.cabin.price=n.price,t()}($(s).attr("index"))}),0==l&&s.click(),l++}),$("#cabin-names p")[0].click()}function t(){let e=0,t=a.cabin.price*a.nights,n=15*a.people.adults*a.nights,r=10*a.people.children*a.nights,l=10*a.people.pets*a.nights;e+=n,a.people.children>0&&(e+=r),a.people.pets>0&&(e+=l),e+=t,e=i.format(e),$("#total-balance")[0].innerHTML=`Total Balance: <strong>${e}</strong>`,$("#book-trip-btn")[0].innerHTML=`Book Trip - ${e}`,$("#item-cabin")[0].innerHTML=`Cabin: <strong>${a.cabin.name}</strong> - <span class="price">${a.cabin.price}/Night</span>`,$("#item-adults")[0].innerHTML=`Adults: <strong>${i.format(n)}</strong> - <span class="price">${i.format(15)}/Adult</span>`,$("#item-children")[0].innerHTML=`Children: <strong>${i.format(r)}</strong> - <span class="price">${i.format(10)}/Child</span>`,$("#item-pets")[0].innerHTML=`Pets: <strong>${i.format(l)}</strong> - <span class="price">${i.format(10)}/Pet</span>`,$("#item-nights")[0].innerHTML=`Nights: <strong>${i.format(t)}</strong>`}function n(){$(`#${l.next}`).css("display",""),l.element.scrollBy(l.element.offsetWidth,0),l.previous=l.current,l.current=l.next,l.next=$(`#${l.current}`).attr("next"),null==l.next?$("#next").attr("disabled",""):$("#next").attr("disabled",null),null==l.previous?$("#previous").attr("disabled",""):$("#previous").attr("disabled",null),setTimeout(()=>{l.element.querySelectorAll("section").forEach(e=>{e.id!=l.current&&$(e).css("display","none")})},500),window.scrollTo(0,$("#sections")[0].offsetTop)}let a={isNightly:"nightly",cabin:{name:"",price:0},people:{adults:0,children:0,pets:0},nights:7,price:0},r={nightly:[{name:"Quaker Brook",image:"cabin-a",price:40},{name:"Deer Brook",image:"cabin-b",price:40},{name:"Suncook (10+ People)",image:"cabin-c",price:60},{name:"Rip Stream",image:"cabin-d",price:50},{name:"Red Brook",image:"cabin-e",price:50}],seasonal:[{name:"Premium Lot with electricity and water",image:"cabin-a",price:3e3},{name:"Primitive Lot",image:"cabin-b",price:1900}]},i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),l={element:$("#sections")[0],current:"time-span",next:"cabin",previous:null};$("#time-span .card").on("click",t=>{a.isNightly="Nightly"==t.currentTarget.querySelector(".name").innerText,e(),n(),$("#section-navigation").css("opacity","")}),$("#next").on("click",e=>{null==$(e.currentTarget).attr("disabled")&&n()}),$("#previous").on("click",e=>{null==$(e.currentTarget).attr("disabled")&&($(`#${l.previous}`).css("display",""),l.current=l.previous,l.previous=$(`#${l.current}`).attr("previous"),l.next=$(`#${l.current}`).attr("next"),null==l.next?$("#next").attr("disabled",""):$("#next").attr("disabled",null),null==l.previous?$("#previous").attr("disabled",""):$("#previous").attr("disabled",null),setTimeout(()=>{l.element.querySelectorAll("section").forEach(e=>{e.id!=l.current&&$(e).css("display","none")})},500),window.scrollTo(0,$("#sections")[0].offsetTop))}),$("input[type=tel]").on("keydown",e=>{let t=e.key;"Enter"!=t&&"Backspace"!=t&&(isNaN(t)||isNaN(parseInt(t)))&&(console.log(t),e.preventDefault())}),$("input[type=tel]").on("change",e=>{let t=e.currentTarget,n=$(t).val().replace(/\D/g,"");if(""!=n){let e=n.substring(0,3),a=n.substring(3,6),r=n.substring(6,10);$(t).val(`(${e}) ${a}-${r}`)}}),e(),$(".count").on("click",e=>{let t=e.target,n=t.parentElement;Array.from(n.querySelectorAll(".count")).forEach(e=>{$(e).attr("selected",null)}),$(t).attr("selected",""),$(n).attr("value",t.innerText)}),$("#pets .count").on("click",e=>{a.people.pets=Number.parseInt($(e.target.parentElement).attr("value")),t()}),$("#adults .count").on("click",e=>{a.people.adults=Number.parseInt($(e.target.parentElement).attr("value")),t()}),$("#children .count").on("click",e=>{a.people.children=Number.parseInt($(e.target.parentElement).attr("value")),t()}),$("#pets .count")[0].click(),$("#adults .count")[1].click(),$("#children .count")[3].click(),function(){let e=new Date;e.setDate(e.getDate()+5);let n=("0"+e.getDate()).slice(-2),r=("0"+(e.getMonth()+1)).slice(-2),i=e.getFullYear()+"-"+r+"-"+n;$("#start-date")[0].value=i,$("input[type=date]").attr("min",i),$("input[type=month]").attr("min",`${e.getFullYear()}-${r}`),$("input[type=month]").attr("value",`${e.getFullYear()}-${r}`),$("input[type=month]").attr("placeholder",`${r}/${e.getFullYear().toString().substring(2,4)}`),e.setDate(e.getDate()+7),n=("0"+e.getDate()).slice(-2),r=("0"+(e.getMonth()+1)).slice(-2),i=e.getFullYear()+"-"+r+"-"+n,$("#end-date")[0].value=i,$("#start-date, #end-date").on("change",()=>{let e=$("input#end-date")[0].valueAsDate,n=$("input#start-date")[0].valueAsDate,r=Math.round((e-n)/864e5);a.nights=r,console.log(a.nights),t()}),$("#end-date").on("change",e=>{let t=e.target.value;$("#start-date")[0].max=t}),$("#start-date").on("change",e=>{let t=e.target.value;$("#end-date")[0].min=t}),t()}(),t()}).call();